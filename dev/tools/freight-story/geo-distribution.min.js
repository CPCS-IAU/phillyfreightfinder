var freightMap={activeMode:"none",colorStops:[[1,"#EDF1F7"],[2,"#4790FF"],[3,"#2375EF"],[4,"#2A4EAB"],[5,"#312867"]],fqStops:[[.8,"#EDF1F7"],[1.7,"#4790FF"],[2.85,"#2375EF"],[4.4,"#2A4EAB"],[7.45,"#312867"]],greyStops:[[.8,"#fafafa"],[1.7,"#e6e6e6"],[2.85,"#c9c9c9"],[4.4,"#a2a2a2"],[7.45,"#848484"]],fcColorStops:[[1,"#f4bd48"],[2,"#ef7e51"],[3,"#ca4b66"],[4,"#883272"],[5,"#312867"]],stylesheet:{version:8,sprite:"https://a.michaelruane.com/styles/fc-styles/sprite",sources:{"fq-data":{type:"vector",url:"https://a.michaelruane.com/data/dvrpc-freight-story.json"}},layers:[{id:"county-fill",type:"fill",source:"fq-data","source-layer":"county",layout:{},paint:{"fill-color":"#c9c9c9","fill-opacity":1},filter:["==","DVRPC_REG","Yes"]},{id:"municipality-outline",type:"line",source:"fq-data","source-layer":"municipalities",paint:{"line-width":.5,"line-color":"#fff"}},{id:"county-outline",type:"line",source:"fq-data","source-layer":"county",paint:{"line-width":2.5,"line-color":"#fff"},filter:["==","DVRPC_REG","Yes"]}]},overlays:["employment","establishment","industrial","landuse","facilities","fq"],fcTypes:["blank","all","ig","hi","dc","ht","lm"],makeIt:function(){$("#distribution-map").css("height",BUBBLE_PARAMETERS.height);var a=new mapboxgl.Map({container:"distribution-map",style:this.stylesheet,center:[-75.2273,40.071],zoom:8.82,hash:!1,scrollZoom:!1,boxZoom:!1,dragRotate:!1,dragPan:!1,keyboard:!1,doubleClickZoom:!1,touchZoomRotate:!1});return a.fitBounds([[-76.09405517578125,39.49211914385648],[-74.32525634765625,40.614734298694216]]),a},fcMakeIt:function(){$("#distribution-map").css("height",BUBBLE_PARAMETERS.height);var a=new mapboxgl.Map({container:"typologies-map",style:this.stylesheet,center:[-75.2273,40.071],zoom:8.82,hash:!1,scrollZoom:!1,boxZoom:!1,dragRotate:!1,dragPan:!1,keyboard:!1,doubleClickZoom:!1,touchZoomRotate:!1});return a.fitBounds([[-76.09405517578125,39.49211914385648],[-74.32525634765625,40.614734298694216]]),a},repaint:function(a,b){if("distribution"===b)for("fq-circles"===a?(map.setPaintProperty("grey-fill","fill-opacity",.65),map.setPaintProperty("grey-half-fill","fill-opacity",.45),map.setPaintProperty("fq-circles","line-opacity",1),map.setPaintProperty("fq-circles-fill","fill-opacity",.12),map.setPaintProperty("fc-preview","line-opacity",0)):"fc-preview"===a?(map.setPaintProperty("grey-fill","fill-opacity",.65),map.setPaintProperty("grey-half-fill","fill-opacity",.45),map.setPaintProperty("fq-circles","line-opacity",.3),map.setPaintProperty("fq-circles-fill","fill-opacity",0),map.setPaintProperty("fc-preview","line-opacity",1)):(map.setPaintProperty("grey-fill","fill-opacity",0),map.setPaintProperty("grey-half-fill","fill-opacity",0),map.setPaintProperty("fq-circles","line-opacity",0),map.setPaintProperty("fq-circles-fill","fill-opacity",0),map.setPaintProperty("fc-preview","line-opacity",0)),i=0;i<this.overlays.length;i++)this.overlays[i]==a?(map.setPaintProperty(a+"-fill","fill-opacity",.65),map.setPaintProperty(a+"-half-fill","fill-opacity",.45)):(map.setPaintProperty(this.overlays[i]+"-fill","fill-opacity",0),map.setPaintProperty(this.overlays[i]+"-half-fill","fill-opacity",0));else if("typologies"===b)switch(a){case"blank":fcMap.setPaintProperty("blank-fc-fill","fill-color","#312867"),fcMap.setPaintProperty("all-fc-fill","fill-opacity",0),fcMap.setFilter("fc-icons",["in","fc-icons",""]);break;default:fcMap.setPaintProperty("blank-fc-fill","fill-color","#a8a8a8"),fcMap.setPaintProperty("all-fc-fill","fill-opacity",1);var c="all"===a?["in","fctyp",1,2,3,4,5]:["in","fctyp",a],d="all"===a?["in","fctyp",""]:["in","fctyp",a];fcMap.setFilter("all-fc-fill",c),fcMap.setFilter("fc-icons",d)}},fitRegion:function(a,b){var c=document.getElementsByClassName("mapboxgl-canvas")[0],d=document.getElementById(a),e=d.parentNode.offsetWidth,f=b?.83*e+"px":BUBBLE_PARAMETERS.height+"px";d.style.width=e+"px",d.style.height=f,c.style.width=e+"px",c.style.height=f,map.resize(),map.fitBounds([[-76.09405517578125,39.49211914385648],[-74.32525634765625,40.614734298694216]])}};mapboxgl.accessToken="pk.eyJ1IjoibXJ1YW5lIiwiYSI6ImNpZ3dnaGF1bjBzNGZ3N201bTQwN3h6YngifQ.pw1khldm3UDHd56okxc5bQ";var map=freightMap.makeIt(),fcMap=freightMap.fcMakeIt();map.on("load",function(){map.addLayer({id:"employment-half-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"score_emp",stops:freightMap.colorStops}},filter:["<","score_emp",3]}),map.addLayer({id:"employment-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"score_emp",stops:freightMap.colorStops}},filter:[">","score_emp",2]}),map.addLayer({id:"establishment-half-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"score_est",stops:freightMap.colorStops}},filter:["<","score_est",3]}),map.addLayer({id:"establishment-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"score_est",stops:freightMap.colorStops}},filter:[">","score_est",2]}),map.addLayer({id:"landuse-half-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"score_lu",stops:freightMap.colorStops}},filter:["<","score_lu",3]}),map.addLayer({id:"landuse-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"score_lu",stops:freightMap.colorStops}},filter:[">","score_lu",2]}),map.addLayer({id:"industrial-half-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"score_ind",stops:freightMap.colorStops}},filter:["<","score_ind",3]}),map.addLayer({id:"industrial-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"score_ind",stops:freightMap.colorStops}},filter:[">","score_ind",2]}),map.addLayer({id:"facilities-half-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"score_fac",stops:freightMap.colorStops}},filter:["<","score_fac",3]}),map.addLayer({id:"facilities-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"score_fac",stops:freightMap.colorStops}},filter:[">","score_fac",2]}),map.addLayer({id:"fq-half-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"fq",stops:freightMap.fqStops}},filter:["<=","fq",2.85]}),map.addLayer({id:"fq-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"fq",stops:freightMap.fqStops}},filter:[">","fq",2.85]}),map.addLayer({id:"grey-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"fq",stops:freightMap.greyStops}},filter:[">","fq",2.85]}),map.addLayer({id:"grey-half-fill",type:"fill",source:"fq-data","source-layer":"fq-analysis",paint:{"fill-opacity":0,"fill-color":{property:"fq",stops:freightMap.greyStops}},filter:["<=","fq",2.85]}),map.addLayer({id:"fq-circles-fill",type:"fill",source:"fq-data","source-layer":"eval-circles",paint:{"fill-opacity":0,"fill-color":"#396ab2"},filter:["==","confirm","y"]}),map.addLayer({id:"fq-circles",type:"line",source:"fq-data","source-layer":"eval-circles",paint:{"line-opacity":0,"line-color":["match",["get","confirm"],"y","#396ab2","n","#312867","#312867"],"line-width":["match",["get","confirm"],"y",3,"n",1,1]}}),map.addLayer({id:"fc-preview",type:"line",source:"fq-data","source-layer":"freight-centers",paint:{"line-opacity":0,"line-color":"#312867","line-width":1}}),"none"!==map_mode&&freightMap.repaint(map_mode,map_section),map_exists=!0}),fcMap.on("load",function(){fcMap.addLayer({id:"blank-fc-fill",type:"fill",source:"fq-data","source-layer":"freight-centers",paint:{"fill-opacity":1,"fill-color":"#312867"}}),fcMap.addLayer({id:"all-fc-fill",type:"fill",source:"fq-data","source-layer":"freight-centers",paint:{"fill-opacity":0,"fill-color":{property:"fctyp",stops:freightMap.fcColorStops}}}),fcMap.addLayer({id:"fc-icons",type:"symbol",source:"fq-data","source-layer":"freight-center-label",layout:{"icon-image":"{fctyp}","icon-size":.8,"icon-allow-overlap":!0,"icon-ignore-placement":!0,"text-allow-overlap":!0,"text-ignore-placement":!0,"icon-anchor":"bottom"},paint:{"icon-opacity":1},filter:["==","fctyp",""],interactive:!0})});