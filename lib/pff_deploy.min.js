function clkHwy(a){if(initializeHL(a),header="<p>"+props.Name+"</p>",void 0===props.Owner)var t=" ";else var t="<div class='two_third' style='float:left;'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div>";content="<div id='baseInfo'>"+t+"</div><img src='lib/images/Shields/"+props.SHLD_ID+".png' alt='Shield' height='50' style='padding-left:20px;'></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#RailrivCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='RailrivCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td class='item'><strong> </strong></td><td><strong>"+props.DIR_1+"</strong></td><td><strong>"+props.DIR_2+"</strong></td></tr><tr class='active'><td class='item'><strong><a title='Predominant lane count for designated segment' data-toggle='infotooltip'>Capacity <span style='font-weight:normal;'>(lanes)</span></a>: </strong></td><td>"+props.CAP_1+"</td><td>"+props.CAP_2+"</td></tr><tr><td class='item'><strong><a title='Average Annual Daily Traffic volume for truck traffic (FHWA Vehicle Classes 5-13)' data-toggle='infotooltip'>Truck AADT</a>: </strong></td><td>"+props.ACT_1A+"</td><td>"+props.ACT_2A+"</td></tr><tr><td class='item'><strong>Truck share of <a title='Average Annual Daily Traffic' data-toggle='infotooltip'>AADT</a>: </strong></td><td>"+props.ACT_1B+"</td><td>"+props.ACT_2B+"</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.YEAR+" "+props.SOURCE+"</div></div>",featureName="<p>Type: "+props.Type+"</p>",featureClass="hwycl",featureIcon="hwyicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkParking(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Township_s+"</div><div class='labelfield'>Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#RailrivCap' data-toggle='tab'>Capacity & Activity</a></li></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='RailrivCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Truck Spaces Available: </strong></td><td>"+props.Capacity+"</td></tr><tr><td><strong> <a title='Truck space utilization determined by single overnight count' data-toggle='infotooltip'>Truck Spaces Utilized</a>: </strong></td><td> "+props.Activity_1+" </td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Truck Parking</p>",featureClass="hwycl",featureIcon="trkparkicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkNHS(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Fac_Served+"</div><div class='labelfield'>Facility Served</div><div class='datafield'>"+props.Township_s+"</div><div class='labelfield'>Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#RailrivCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='RailrivCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong> <a title='Predominant lane count for designated segment' data-toggle='infotooltip'>Lanes per direction</a>: </strong></td><td>"+props.Cap_1+"</td></tr><tr><td><strong> <a title='Average Annual Daily Traffic' data-toggle='infotooltip'>AADT</a>: </strong></td><td>not available</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: NHS Connector</p>",featureClass="hwycl",featureIcon="nhsicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkHwyRvrXing(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Line+"</div><div class='labelfield'>Highway</div><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Tolled (y/n)</div><div class='datafield'>"+props.Type_1+"</div><div class='labelfield'>Bridge Type</div><div class='datafield'>"+props.Town_1+" - "+props.Town_2+"</div><div class='labelfield'>Connecting Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#RailrivCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='RailrivCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong><a title='Total count of lanes, both directions.' data-toggle='infotooltip'>Travel Lanes</a>: </strong></td><td>"+props.Cap_1+"</td></tr><tr><td><strong>Vertical Restriction <span style='font-weight:normal;'>(ft)</span>: </strong></td><td>"+props.Cap_2+"</td></tr><tr class='active'><td><strong> <a title='Average Annual Daily Traffic' data-toggle='infotooltip'>AADT</a>: </strong></td><td>"+props.Act_1+"</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Highway River Crossing</p>",featureClass="hwycl",featureIcon="hwyrivicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkRailline(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator+"</div><div class='labelfield'>Operator(s)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#IntermodalCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='IntermodalCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong> <a title='Predominant count of through tracks on designated segment' data-toggle='infotooltip'>Number of Tracks</a>: </strong></td><td>"+props.Cap1+"</td></tr><tr><td><strong> <a title='Ability to operate double stack trains. Double stack is a technology allowing intermodal containers to be stack two high on train cars.' data-toggle='infotooltip'>Double Stack Clearance</a>: </strong></td><td> "+props.Cap2+" </td></tr><tr class='active'><td><strong> <a title='Capacity to operate 286,000 pound rail cars on designated segment' data-toggle='infotooltip'>286k Capacity</a>: </strong></td><td>"+props.Cap3+"</td></tr><tr><td><strong> Trains Daily: </strong></td><td>not reported</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: "+props.Type+"</p>",featureClass="railcl",featureIcon="railicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkRailYard(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Rail_Line+"</div><div class='labelfield'>Line Serving</div><div class='datafield'>"+props.Township+"</div><div class='labelfield'>Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#IntermodalCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='IntermodalCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Acres: </strong></td><td>"+numeral(props.GIS_Acres).format("0,0.0")+"</td></tr><tr><td><strong>Annual Car Count: </strong></td><td>n/a</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Rail Yard</p>",featureClass="railcl",featureIcon="railyardicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkRailXing(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Owner_1+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Township+"</div><div class='labelfield'>Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong> <a title='Count of active tracks at grade crossing' data-toggle='infotooltip'>Tracks at Crossing</a>: </strong></td><td>"+props.Cap+"</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source_1+"</div></div><div style='height:34px;'><a href='http://safetydata.fra.dot.gov/OfficeofSafety/publicsite/Crossing/Report.aspx?phasetype=C&rpttype=A&txtcrossingnum="+props.CROSSING+"' target='_blank' style='line-height:34px;float:left;'><div class='pdf'></div>Related Report:</a></div>",featureName="<p>Type: Class I Grade Crossing</p>",featureClass="railcl",featureIcon="railcrossicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkIntermodal(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Township+"</div><div class='labelfield'>Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#IntermodalCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='IntermodalCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Acres: </strong></td><td>"+numeral(props.GIS_Acres).format("0,0.0")+"</td></tr><tr><td><strong>Activity: </strong></td><td>n/a</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Intermodal Rail Yard</p>",featureClass="railcl",featureIcon="railintericon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkRailRvrXing(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Line+"</div><div class='labelfield'>Rail Line</div><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Type_1+"</div><div class='labelfield'>Bridge Type</div><div class='datafield'>"+props.Town_1+" - "+props.Town_2+"</div><div class='labelfield'>Connecting Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#RailrivCap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='RailrivCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Width <span style='font-weight:normal;'>(tracks)</span>: </strong></td><td>"+props.Cap_1+"</td></tr><tr><td><strong> <a title='Ability to operate double stack trains. Double stack is a technology allowing intermodal containers to be stack two high on train cars.' data-toggle='infotooltip'>Double Stack Clearance</a>: </strong></td><td>"+props.Cap_2+"</td></tr><tr class='active'><td><strong> <a title='Capacity to operate 286,000 pound rail cars on designated segment' data-toggle='infotooltip'>286k Capacity</a>: </strong></td><td>"+props.Cap_3+"</td></tr><tr><td><strong>Activity: </strong></td><td>"+props.Act_1+"</a></td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Rail River Crossing</p>",featureClass="railcl",featureIcon="railrivicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkport(a){initializeHL(a),header="<p>"+props.Name+"</p>";var t="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Township+"</div><div class='labelfield'>Municipal Location</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#portCap' data-toggle='tab'>Capacity</a></li><li><a href='#portAct' data-toggle='tab'>Activity</a></li></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='portCap' style='padding-bottom: 12px;height:72px;'><table class='table table-hover'><tr class='active'><td><strong>Berth Depth <span style='font-weight:normal;'><a title='Mean Low Water' data-toggle='infotooltip'>(MLW)</a></span>: </strong></td><td>not reported</td></tr><tr class='active'><td><strong>Storage Capacity: </strong></td><td>not reported</td></tr></table></div><div class='tab-pane' id='portAct' style='padding-bottom: 12px;height:72px;'><table class='table table-hover'><tr class='active'><td class='item'><strong>2012 Ship Arrivals: </strong></td><td>"+props.Act_1+"</td><td>o</td></tr><tr class='active'><td class='item'><strong>Cargo handled: </strong></td><td colspan='2' style='line-height:1!important;'>"+props.Cargo+"</td></tr></table></div></div><div class='labelfield source'>"+props.Source+"</div></div>",e="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Operator_s+"</div><div class='labelfield'>Operator(s)</div><div class='datafield'>"+props.Township+"</div><div class='labelfield'>Municipal Location</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#portCap' data-toggle='tab'>Capacity</a></li><li><a href='#portAct' data-toggle='tab'>Activity</a></li></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='portCap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Qty of Berths: </strong></td><td>"+props.Cap_1+"</td></tr><tr><td><strong>Total Berth Length: </strong></td><td>"+props.Cap_2+" linear ft</td></tr><tr class='active'><td><strong>Berth Depth <span style='font-weight:normal;'><a title='Mean Low Water' data-toggle='infotooltip'>(MLW)</a></span>: </strong></td><td>"+props.Cap_3+" feet</td></tr><tr><td><strong>Available Cranes: </strong></td><td><a title='"+props.Cap_4+"' data-toggle='infotooltip'>"+props.Cap_41+"</a></td></tr><tr class='active'><td><strong>Warehouse Space: </strong></td><td>"+props.Cap_5+"</td></tr></table></div><div class='tab-pane' id='portAct' style='padding-bottom: 12px;height:132px;'><table class='table table-hover'><tr class='active'><td class='item'><strong>2012 Ship Arrivals: </strong></td><td>"+props.Act_1+"</td><td>o</td></tr><tr class='active'><td class='item'><strong>Cargo handled: </strong></td><td colspan='2' style='line-height:1!important;'>"+props.Cargo+"</td></tr></table></div></div><div class='labelfield source'>"+props.Source+"</div></div>";content="Bulk"==props.Type?t:e,featureName="<p>Type: "+props.Type+" Terminal</p>",featureClass="portcl",featureIcon="porticon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkanchorage(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Township_s+"</div><div class='labelfield'>Adjacent Municipality(ies)</div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong> Annual Ships ("+props.YEAR+"): </strong></td><td>"+props.Act_1+"</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Anchorage</p>",featureClass="portcl",featureIcon="anchicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkriver(a){initializeHL(a),header="<p>"+props.NAME+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Township_s+"</div><div class='labelfield'>Adjacent Municipality(ies)</div><div class='datafield'>"+props.Start+"</div><div class='labelfield'> <a title='Nautical miles from Atlantic Ocean' data-toggle='infotooltip'>Start Point</a>: </div><div class='datafield'>"+props.End+"</div><div class='labelfield'> <a title='Nautical miles from Atlantic Ocean' data-toggle='infotooltip'>End Point</a>: </div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Channel Width <span style='font-weight:normal;'>(ft)</span>: </strong></td><td>"+props.Cap_1+"</td></tr><tr><td><strong> Channel Depth <span style='font-weight:normal;'><a title='Mean Lower Low Water' data-toggle='infotooltip'>(MLLW in ft)</a></span>: </strong></td><td>"+props.Cap_2+"</td></tr><tr class='active'><td><strong> <a title='Approved vertical clearance within navigable channel' data-toggle='infotooltip'>Maximum Air Draft <span style='font-weight:normal;'>(ft)</span></a>: </strong></td><td>"+props.Cap_3+"</td></tr><tr><td><strong>Annual Activity: </strong></td><td>not reported</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: River Channel</p>",featureClass="portcl",featureIcon="rivericon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkFreightCenter(a){initializeHL(a);var t;header="<p>"+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Center_Typ+"</div><div class='labelfield'>Type</div><div class='datafield'>"+props.Township_s+"</div><div class='labelfield'>Municipality(ies): </div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Acres: </strong></td><td>"+numeral(props.Acres).format("0,0.0")+"</td></tr><tr><td><strong>Output: </strong></td><td>not available</td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>","Intermediate"===props.Center_Typ?t="fcinter":"Major"===props.Center_Typ?t="fcmajor":"Mega"===props.Center_Typ&&(t="fcmega"),featureName="<p>Type: "+props.Center_Typ+" Freight Center</p>",featureClass=""+t+"cl",featureIcon=""+t+"icon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkairport(a){initializeHL(a);var t;header="<p>("+props.NAVID+") "+props.Name+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Airport_Ty+"</div><div class='labelfield'>Type</div><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.Township+"</div><div class='labelfield'>Municipality(ies): </div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Runway(s): </strong></td><td>"+props.Cap_1+"</td></tr><tr><td><strong>Runway Length(s): </strong></td><td> "+props.Cap_2+" </td></tr><tr class='active'><td><strong>Total Acreage: </strong></td><td>"+props.Cap_3+"</td></tr><tr><td><strong> <a title='Count of annual takeoffs and landings' data-toggle='infotooltip'>Annual Operations</a>: </strong></td><td> "+props.Activity_1+" </td></tr></table></div></div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>","Commercial"===props.Airport_Ty?t="comm":"Reliever"===props.Airport_Ty&&(t="rel"),featureName="<p>Type: "+props.Airport_Ty+" Airport</p>",featureClass=""+t+"aircl",featureIcon=""+t+"icon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkheliport(a){initializeHL(a),header="<p>("+props.LocationID+") "+props.FacilityNa+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Owner+"</div><div class='labelfield'>Owner</div><div class='datafield'>"+props.City+"</div><div class='labelfield'>Municipality(ies): </div></div><!--close baseInfo--><div class='infoDivider'></div><div id='indactorInfo'><ul class='nav nav-tabs'><!--tabs for indicators--><li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul><div id='indicator' class='tab-content'><!--tab panes--><div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Diameter: </strong></td><td>"+props.Size+" ft</td></tr><tr><td><strong>Annual Operations: </strong></td><td>not available</td></tr></table></div></div><div class='labelfield source'>Data Source: 2013 DVRPC</div></div>",featureName="<p>Type: Heliport</p>",featureClass="heliportcl",featureIcon="heliporticon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkpipelines(a){initializeHL(a),header="<p>Pipeline</p>",content="<div id='baseInfo'><div class='datafield'>"+props.TYPE+"</div><div class='labelfield'>Material Transported</div><div class='datafield'>"+props.COUNTY+"</div><div class='labelfield'>County</div><div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Pipeline</p>",featureClass="energycl",featureIcon="pipelineicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function clkfgneighbor(a){initializeHL(a),header="<p>Freight as a Good Neighbor</p>",content="<div id='baseInfo'><div class='datafield'>"+props.Municipali+"</div><div class='labelfield'>Municipality</div><div class='datafield'>"+props.County+" County</div><div class='labelfield'>County</div><div class='datafield'> "+props.Descr1+props.Descr2+" "+props.Descr3+" </div><div class='labelfield source'>Data Source: 2012 DVRPC</div></div>",featureName="<p>Type: Freight as a Good Neighbor</p>",featureClass="communcl",featureIcon="communicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function displayCountyname(a){var t=a.target;t.bringToFront(),t.setStyle({color:"#312867"});var e=t.feature.properties,i="<p>"+e.NAME+" County</p>";document.getElementById("countyname").innerHTML=i,$("#countyname").hasClass("hidden")&&$("#countyname").removeClass("hidden")}function clearCountyname(a){var t=a.target;t.setStyle({color:"#efefef"}),document.getElementById("countyname").innerHTML=" ",$("#countyname").addClass("hidden")}function showRegional(){resetCounty(),window.location.hash="#region",$("#dataContainer").hasClass("hidden")&&($("#dataContainer").removeClass("hidden"),$("#dataCounty").addClass("hidden"),populateCharts())}function populateCounty(a){mcounty.setStyle({fillColor:"#396ab2"});var t=a.target;t.setStyle({fillColor:"#312867"}),$("#dataCounty").hasClass("hidden")&&($("#dataContainer").addClass("hidden"),$("#dataCounty").removeClass("hidden"));var e=t.feature.properties,i="#region,"+t._leaflet_id;window.location.hash=i;var s="<ul class='bxslider'><li><img src='lib/images/county/small/"+e.NAME+"/1.jpg'  title='"+e.one+"' /></li><li><img src='lib/images/county/small/"+e.NAME+"/2.jpg' title='"+e.two+"' /></li><li><img src='lib/images/county/small/"+e.NAME+"/3.jpg' title='"+e.three+"' /></li><li><img src='lib/images/county/small/"+e.NAME+"/4.jpg' title='"+e.four+"' /></li><li><img src='lib/images/county/small/"+e.NAME+"/5.jpg' title='"+e.five+"' /></li><li><img src='lib/images/county/small/"+e.NAME+"/6.jpg' title='"+e.six+"' /></li><li><img src='lib/images/county/small/"+e.NAME+"/7.jpg' title='"+e.seven+"' /></li><li><img src='lib/images/county/small/"+e.NAME+"/8.jpg' title='"+e.eight+"' /></li></ul>";$("#ctyDataName").html(""+e.NAME+" County"),$("#data-1").html(""+e.IntRouteMi),$("#data-2").html(""+e.NatHwyMile),$("#data-5").html(""+e.truckMiles),$("#data-6").html(""+e.freightRai),$("#data-8").html(""+e.portTermin);var l=parseInt(e.megaCtr,10)+parseInt(e.majCtr,10)+parseInt(e.intCtr,10);$("#data-10").html(""+l),$("#data-11").html(""+e.FCacreage),$("#data-3").html(""+e.NHS),$("#data-4").html(""+e.interch),$("#data-7").html(""+e.yards),$("#data-9").html(""+e.ShipCalls),$("#ctySlideshow").html(""+s);var d=e.NAME,o=e.IntRouteMi,r=e.NatHwyMile,n=e.truckMiles,c=e.freightRai,p=e.portTermin,v=e.megaCtr,f=e.majCtr,b=e.intCtr,u=e.NHS,g=e.interch,h=e.yards,y=e.FCacreage,m=e.LTmiles,C=e.HTmiles,I=e.ShipCalls,w=Math.floor(8*Math.random())+1;if(w=1)var A=e.one;else if(w=2)var A=e.two;else if(w=3)var A=e.three;else if(w=4)var A=e.four;else if(w=5)var A=e.five;else if(w=6)var A=e.six;else if(w=7)var A=e.seven;else if(w=8)var A=e.eight;else w=9;var T=a.target.getBounds(),N={name:d,1:o,2:r,3:n,4:c,5:p,6:v,7:f,8:b,9:u,10:g,11:h,12:y,13:m,14:C,15:I,16:w,17:A},S="modals/mcountyPrint.html?"+serialize(N);$("#countyBtn").html('<a href="'+S+'" target="_blank"><button class="btn btn-primary" ><i class="dynico dynico-compass"></i>&nbsp;&nbsp;Print Version</button></a>'),$("#countyBoundsLink").html('<a href="#map" onClick="zoomToCounty('+T._southWest.lat+", "+T._southWest.lng+", "+T._northEast.lat+", "+T._northEast.lng+');"><button class="btn btn-primary" ><i class="dynico dynico-map"></i>&nbsp;&nbsp;Browse by Map</button></a>');$(".bxslider").bxSlider({auto:!0,slideMargin:5,captions:!0})}function resetCounty(a){mcounty.setStyle({fillColor:"#396ab2"})}function activateTooltip(){$("[data-toggle=infotooltip]").tooltip({placement:"left"})}function zoomToCounty(a,t,e,i){map.invalidateSize(),setTimeout(function(){map.fitBounds([[a,t],[e,i]])},500)}function loadBar2(){return map.invalidateSize(),$("#loading").show().delay(100).promise()}var hlweight=7,hlColor="#00CCFF",layersearch,props,header,content,featureName,featureClass,featureIcon;serialize=function(a){var t=[];for(var e in a)a.hasOwnProperty(e)&&t.push(encodeURIComponent(e)+"="+encodeURIComponent(a[e]));return t.join("&")};var dataID,dwnID,dwnName,dwnFile,dwnDate,baseURL=window.location.href.split("#")[0],dataURL=baseURL+"data/download/dataUpdates.js",sandboxURL=baseURL.substring(0,baseURL.length-10)+"/data/download/dataUpdates.js";$.getJSON(dataURL,function(a){for(var t=0;t<a.length;t++)dwnID=a[t].id,dwnName=a[t].name,dwnFile=a[t].filename,dwnDate=a[t].date,$(".dataDwnld-"+dwnID).append('<div class="right dl"><div class="noLink">Last Update: '+dwnDate+'</div><div class="noLink">Download: </div><a class="dlLink" href="http://dvrpcfreight.github.io/phillyfreightfinder/data/download/'+dwnFile+'.zip" data-toggle="tooltip" title="Download Shapefile" >shp</a><a class="dlLink" href="http://dvrpcfreight.github.io/phillyfreightfinder/data/download/'+dwnFile+'.csv" data-toggle="tooltip" title="Download CSV" >csv</a><a class="dlLink" href="http://dvrpcfreight.github.io/phillyfreightfinder/data/download/'+dwnFile+'.json" download="'+dwnFile+'.json" data-toggle="tooltip" title="Download JSON" >json</a></div>'),$('[data-toggle="tooltip"]').tooltip()}),$(".tocLink").on("click",function(){var a=$(this).attr("val"),t=document.getElementById(a);t.scrollIntoView(!0)}),$(document).ready(function(){$('a[href="#"]').click(function(a){a.preventDefault()}),Highcharts.setOptions({chart:{type:"pie",backgroundColor:"#396AB2"},title:{verticalAlign:"middle",align:"center",floating:!0,useHTML:!0},yAxis:{title:{text:""}},credits:{enabled:!1},plotOptions:{pie:{shadow:!1,dataLabels:{enabled:!1},borderColor:"#335e9f",borderWidth:0,colors:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"]}},series:[{size:"230%",innerSize:"130%"}]}),$.getJSON("data/valueRegion.json",function(a){for(var t=[],e=[],i=a.region,s=i.length,l=0;s>l;l++)t.push({name:i[l].type,y:i[l].value}),e.push({name:i[l].type,y:i[l].tons});new Highcharts.Chart({chart:{renderTo:"containerValue"},title:{text:'<div style="text-align:center;line-height: 0.8;"><span class="chartPrefix">by</span><br><span class="chartLabel">VALUE</span></div>',y:-55},tooltip:{formatter:function(){return"<b>"+this.key+"</b><br/><b>$"+this.y+"</b> billion<br/>"+Math.round(100*this.percentage)/100+"%"}},plotOptions:{pie:{center:["50%","-15%"],colors:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],startAngle:90,endAngle:270}},series:[{id:"Values",name:"Value",size:"230%",innerSize:"130%",data:t}]}),new Highcharts.Chart({chart:{renderTo:"containerTon"},title:{text:'<div style="text-align:center;line-height: 0.8;"><span class="chartPrefix">by</span><br><span class="chartLabel">TONNAGE</span></div>',y:55},tooltip:{formatter:function(){return"<b>"+this.key+"</b><br/><b>"+this.y+"</b> tons<br/>"+Math.round(100*this.percentage)/100+"%"}},plotOptions:{pie:{center:["50%","120%"],colors:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],startAngle:-90,endAngle:90}},series:[{id:"Tons",name:"Ton",size:"230%",innerSize:"130%",data:e}]})})});
function addStreetLabels(){var e=Esri_transportation.addTo(map);topPane.appendChild(e.getContainer()),e.setZIndex(2)}function loadSearchBar(){$("#loading").hide();var e=$("#searchbox"),a=$("#searchhome"),r=e[0],o=a[0],i=new Bloodhound({name:"Counties",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:countySearch,limit:10}),n=new Bloodhound({name:"Highways",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:highwaySearch,limit:10}),t=new Bloodhound({name:"NHS",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:nhsSearch,limit:10}),l=new Bloodhound({name:"TruckParking",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:truckParkSearch,limit:10}),c=new Bloodhound({name:"HwyBridges",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:hwyBridgeSearch,limit:10}),s=new Bloodhound({name:"RailLines",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:railSearch,limit:10}),p=new Bloodhound({name:"RailYards",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:railyardSearch,limit:10}),d=new Bloodhound({name:"Intermodal",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:intermodalSearch,limit:10}),u=new Bloodhound({name:"GradeCrossing",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:xingSearch,limit:10}),m=new Bloodhound({name:"RailBridges",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:RailBridgeSearch,limit:10}),h=new Bloodhound({name:"Rivers",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:riverSearch,limit:10}),y=new Bloodhound({name:"PortTerminals",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:portSearch,limit:10}),g=new Bloodhound({name:"Anchorages",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:anchSearch,limit:10}),k=new Bloodhound({name:"CommAirports",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:commairSearch,limit:10}),f=new Bloodhound({name:"ReleivAirports",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:relairSearch,limit:10}),L=new Bloodhound({name:"Heliports",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:heliportSearch,limit:10}),C=new Bloodhound({name:"FCinter",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:FCinterSearch,limit:10}),F=new Bloodhound({name:"FCmajor",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:FCmajorSearch,limit:10}),b=new Bloodhound({name:"FCmega",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:FCmegaSearch,limit:10}),w=new Bloodhound({name:"GeoNames",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"http://api.geonames.org/searchJSON?username=bootleaf&featureClass=P&maxRows=5&countryCode=US&name_startsWith=%QUERY",filter:function(e){return $.map(e.geonames,function(e){return{name:e.name+", "+e.adminCode1,lat:e.lat,lng:e.lng,source:"GeoNames"}})},ajax:{beforeSend:function(e,a){a.url+="&east="+counties.getBounds().getEast()+"&west="+counties.getBounds().getWest()+"&north="+counties.getBounds().getNorth()+"&south="+counties.getBounds().getSouth(),$("#searchicon").removeClass("fa-search").addClass("fa-refresh fa-spin")},complete:function(e,a){$("#searchicon").removeClass("fa-refresh fa-spin").addClass("fa-search")}}},limit:10});i.initialize(),n.initialize(),l.initialize(),c.initialize(),t.initialize(),s.initialize(),p.initialize(),d.initialize(),u.initialize(),m.initialize(),h.initialize(),y.initialize(),g.initialize(),k.initialize(),f.initialize(),L.initialize(),C.initialize(),F.initialize(),b.initialize(),w.initialize(),$([r,o]).typeahead({minLength:2,highlight:!0,hint:!1},{name:"Counties",displayKey:"name",source:i.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>County</h5>"}},{name:"Highways",displayKey:"name",source:n.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/truck.png' class='searchico'>Highways</h5>"}},{name:"NHS",displayKey:"name",source:t.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/nhs.png' class='searchico'>NHS Connectors</h5>"}},{name:"TruckParking",displayKey:"name",source:l.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/parking.png' class='searchico'>Truck Parking</h5>"}},{name:"HwyBridges",displayKey:"name",source:c.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/bridge2.png' class='searchico'>Highway River Crossings</h5>"}},{name:"RailLines",displayKey:"name",source:s.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/train.png' class='searchico'>Rail Lines</h5>"}},{name:"RailYards",displayKey:"name",source:p.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/railyard.png' class='searchico'>Rail Yards</h5>"}},{name:"Intermodal",displayKey:"name",source:d.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/intermodal.png' class='searchico'>Intermodal Rail Yards</h5>"}},{name:"GradeCrossing",displayKey:"name",source:u.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/gradecrossing.png' class='searchico'>Grade Crossings</h5>"}},{name:"RailBridges",displayKey:"name",source:m.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/bridge1.png' class='searchico'>Rail River Crossing</h5>"}},{name:"Rivers",displayKey:"name",source:h.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/river.png' class='searchico'>River Channels</h5>"}},{name:"PortTerminals",displayKey:"name",source:y.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/ports.png' class='searchico'>Port Terminals</h5>"}},{name:"Anchorages",displayKey:"name",source:g.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/anchor.png' class='searchico'>Anchorages</h5>"}},{name:"CommAirports",displayKey:"name",source:k.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/aiport1.png' class='searchico'>Commercial Airports</h5>"}},{name:"ReleivAirports",displayKey:"name",source:f.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/airport2.png' class='searchico'>Releiver Airports</h5>"}},{name:"Heliports",displayKey:"name",source:L.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/heliport.png' class='searchico'>Heliports</h5>"}},{name:"FCinter",displayKey:"name",source:C.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/17.png' class='searchico'>Intermediate Center</h5>"}},{name:"FCmajor",displayKey:"name",source:F.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/18.png' class='searchico'>Major Center</h5>"}},{name:"FCmega",displayKey:"name",source:b.ttAdapter(),templates:{header:"<h5 class='typeahead-header'><img src='lib/images/flat/19.png' class='searchico'>Mega Center</h5>"}},{name:"GeoNames",displayKey:"name",source:w.ttAdapter(),templates:{header:"<h4 class='typeahead-header'>Place Results</h4>"}}).on("typeahead:selected",function(e,a){$("#nav_search").hasClass("hidden")&&($("#pFFlanding").fadeOut(800),$("#nav_search").removeClass("hidden"),$("#maplink").addClass("hidden")),"Counties"===a.source&&map.fitBounds(a.bounds),"Highways"===a.source&&(map.hasLayer(freeway)||(map.addLayer(freeway),$("#freeway").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"NHS"===a.source&&(map.hasLayer(nhsgroup)||(map.addLayer(nhsgroup),$("#nhsgroup").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"TruckParking"===a.source&&(map.hasLayer(trkparkgroup)||(map.addLayer(trkparkgroup),$("#trkparkgroup").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"HwyBridges"===a.source&&(map.hasLayer(hwyrivcrossing)||(map.addLayer(hwyrivcrossing),$("#hwyrivcrossing").prop("checked",!0)),map.setView([a.lat,a.lng],17),map._layers[a.id]&&map._layers[a.id].fire("click")),"RailLines"===a.source&&(map.hasLayer(railines)||(map.addLayer(railines),$("#railines").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"RailYards"===a.source&&(map.hasLayer(railyardgroup)||(map.addLayer(railyardgroup),$("#railyardgroup").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"Intermodal"===a.source&&(map.hasLayer(intermodalgroup)||(map.addLayer(intermodalgroup),$("#intermodalgroup").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"GradeCrossing"===a.source&&(map.hasLayer(gradexing)||(map.addLayer(gradexing),$("#gradexing").prop("checked",!0)),map.setView([a.lat,a.lng],17),map._layers[a.id]&&map._layers[a.id].fire("click")),"RailBridges"===a.source&&(map.hasLayer(railbridgept)||(map.addLayer(railbridgept),$("#railbridgept").prop("checked",!0)),map.setView([a.lat,a.lng],17),map._layers[a.id]&&map._layers[a.id].fire("click")),"Rivers"===a.source&&(map.hasLayer(river)||(map.addLayer(river),$("#river").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"PortTerminals"===a.source&&(map.hasLayer(portGroup)||(map.addLayer(portGroup),$("#portGroup").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"Anchorages"===a.source&&(map.hasLayer(anchorageGroup)||(map.addLayer(anchorageGroup),$("#anchorageGroup").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"CommAirports"===a.source&&(map.hasLayer(commGroup)||(map.addLayer(commGroup),$("#commGroup").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"ReleivAirports"===a.source&&(map.hasLayer(relGroup)||(map.addLayer(relGroup),$("#relGroup").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"Heliports"===a.source&&(map.hasLayer(heliport)||(map.addLayer(heliport),$("#heliport").prop("checked",!0)),map.setView([a.lat,a.lng],17),map._layers[a.id]&&map._layers[a.id].fire("click")),"FCinter"===a.source&&(map.hasLayer(FCintergroup)||(map.addLayer(FCintergroup),$("#FCintergroup").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"FCmajor"===a.source&&(map.hasLayer(FCmajorgroup)||(map.addLayer(FCmajorgroup),$("#FCmajorgroup").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"FCmega"===a.source&&(map.hasLayer(FCmegagroup)||(map.addLayer(FCmegagroup),$("#FCmegagroup").prop("checked",!0)),map.fitBounds(a.bounds),map._layers[a.id]&&map._layers[a.id].fire("click")),"GeoNames"===a.source&&map.setView([a.lat,a.lng],14),$(".navbar-collapse").height()>50&&$(".navbar-collapse").collapse("hide")}).on("typeahead:opened",function(){$(".navbar-collapse.in").css("max-height",$(document).height()-$(".navbar-header").height()),$(".navbar-collapse.in").css("height",$(document).height()-$(".navbar-header").height())}).on("typeahead:closed",function(){$(".navbar-collapse.in").css("max-height",""),$(".navbar-collapse.in").css("height","")}),$(".twitter-typeahead").css("position","static"),$(".twitter-typeahead").css("display","block")}function renderLayers(){var e=[];$('input:checkbox[name="LayerCont"]').each(function(){map.removeLayer(window[$(this).attr("id")]),$("#"+$(this).attr("id")).is(":checked")&&e.push({"z-index":$(this).attr("z-index"),layer:$(this)})});var a=sortByKey(e,"z-index");$.each(a,function(){map.addLayer(window[$(this)[0].layer[0].id])})}function loadLayers(){var e=$("#mapLoad").val();"false"===e&&($.getJSON("data/FCinterPoly.js",function(e){FCinterpoly.addData(e)}),polyLayer.push("FCinterpoly"),$.getJSON("data/FCinterPts.js",function(e){FCinterpt.addData(e)}),$.getJSON("data/FCmajorPoly.js",function(e){FCmajorpoly.addData(e)}),polyLayer.push("FCmajorpoly"),$.getJSON("data/FCmajorPts.js",function(e){FCmajorpt.addData(e)}),$.getJSON("data/FCmegaPoly.js",function(e){FCmegapoly.addData(e)}),polyLayer.push("FCmegapoly"),$.getJSON("data/FCmegaPts.js",function(e){FCmegapt.addData(e)}),$.getJSON("data/commPoly.js",function(e){commairpoly.addData(e)}),polyLayer.push("commairpoly"),$.getJSON("data/commPts.js",function(e){commairpt.addData(e)}),$.getJSON("data/releivPoly.js",function(e){relairpoly.addData(e)}),polyLayer.push("relairpoly"),$.getJSON("data/releivPts.js",function(e){relvairpt.addData(e)}),$.getJSON("data/heliports.js",function(e){heliport.addData(e)}),$.getJSON("data/truckparkPoly.js",function(e){truckparkpoly.addData(e)}),polyLayer.push("truckparkpoly"),$.getJSON("data/truckparkPts.js",function(e){tppoints.addData(e)}),$.getJSON("data/hwybrdgPts.js",function(e){hwyrivcrossing.addData(e)}),$.getJSON("data/river.js",function(e){river.addData(e)}),polyLayer.push("river"),$.getJSON("data/portPoly.js",function(e){portpoly.addData(e)}),$.getJSON("data/nhsPts.js",function(e){nhs.addData(e)}),$.getJSON("data/freightrail.js",function(e){railines.addData(e)}),polyLayer.push("railines"),$.getJSON("data/railyardPoly.js",function(e){railyardpoly.addData(e)}),polyLayer.push("railyardpoly"),$.getJSON("data/railyardPts.js",function(e){railyardpt.addData(e)}),$.getJSON("data/intermodalPoly.js",function(e){intermodalpoly.addData(e)}),polyLayer.push("intermodalpoly"),$.getJSON("data/intermodalPts.js",function(e){intermodalpt.addData(e)}),$.getJSON("data/railbrdgPts.js",function(e){railbridge.addData(e)}),polyLayer.push("portpoly"),$.getJSON("data/portPts.js",function(e){porticon.addData(e)}),polyLayer.push("anchoragepoly"),$.getJSON("data/anchPts.js",function(e){anchoricon.addData(e)}),$.getJSON("data/nhsPoly.js",function(e){nhspoly.addData(e)}),polyLayer.push("nhspoly"),$.getJSON("data/highways.js",function(e){freeway.addData(e)}),polyLayer.push("freeway"),$.getJSON("data/anchPoly.js",function(e){anchoragepoly.addData(e)}),$.getJSON("data/pipelines.js",function(e){pipelines.addData(e)}),polyLayer.push("pipelines"),$.getJSON("data/goodneighbor.js",function(e){fgneighbor.addData(e)}),$(".panelinfo").addClass("dynico dynico-info"),$("input#mapLoad").attr("value","true"),$(".legPanel").each(function(){var e=$(this).find("input.layer").length,a=$(this).find("input.layer:checked").length;e==a?($(this).closest(".panel").find(".checked_all").html('<div class="chkicon dynico dynico-check-square-o"></div>'),$(this).closest(".panel-body").append('<input type="hidden" class="Chkd" value="false" />')):($(this).closest(".panel").find(".checked_all").html('<div class="chkicon dynico dynico-square-o"></div>'),$(this).closest(".panel-body").append('<input type="hidden" class="Chkd" value="true" />'));var r=$(this).find(".dynacheck").length;r>0&&$(this).find("input.layer:checked").siblings(".dynacheck").find(".legend-check").html('<i class="dynico dynico-check-square-o"></i>')}),renderLayers(),setTimeout(function(){renderLayers(),loadSearchBar()},3500),setTimeout(function(){renderLayers(),loadSearchBar()},5500))}var oLat=40.018,oLng=-75.148,zLevel=9,map,map2,countySearch=[],polyLayer=[],highwaySearch=[],truckParkSearch=[],nhsSearch=[],hwyBridgeSearch=[],railSearch=[],railyardSearch=[],intermodalSearch=[],RailBridgeSearch=[],xingSearch=[],riverSearch=[],portSearch=[],anchSearch=[],commairSearch=[],relairSearch=[],heliportSearch=[],FCinterSearch=[],FCmajorSearch=[],FCmegaSearch=[],mcountyPrint=[],Stamen_TonerBackground=L.tileLayer("http://{s}.tile.stamen.com/toner-background/{z}/{x}/{y}.png",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',subdomains:"abcd",opacity:0});countymap=L.map("map2",{minZoom:8,maxZoom:8,dragging:!1,zoomControl:!1,boxZoom:!1,doubleClickZoom:!1,touchZoom:!1,layers:[Stamen_TonerBackground]});var mcounty=L.geoJson(null,{style:{color:"#efefef",weight:4,fillColor:"#396ab2",opacity:1,fillOpacity:1},onEachFeature:function(e,a){a.on({mouseover:displayCountyname,mouseout:clearCountyname,click:populateCounty})}});$.getJSON("data/county5k.js",function(e){mcounty.addData(e)}).complete(function(){countymap.fitBounds(mcounty.getBounds())});var Esri_WorldImagery=L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),Esri_transportation=L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",{minZoom:8,maxZoom:18}),Acetate_all=L.tileLayer("http://a{s}.acetate.geoiq.com/tiles/acetate-hillshading/{z}/{x}/{y}.png",{attribution:"&copy;2012 Esri & Stamen, Data from OSM and Natural Earth",subdomains:"0123",minZoom:2,maxZoom:18}),map=L.map("mapDIV",{minZoom:zLevel,zoomControl:!1,layers:[Acetate_all]}),baseLayers={Satellite:Esri_WorldImagery,"Street Map":Acetate_all};L.control.layers(baseLayers).addTo(map);var topPane=map._createPane("leaflet-top-pane",map.getPanes().mapPane);map.on("moveend",function(){map.getZoom()>13&&map.hasLayer(Esri_WorldImagery)&&addStreetLabels(),map.getZoom()<=13&&map.removeLayer(Esri_transportation)}),map.on("baselayerchange",function(){map.getZoom()>13&&map.hasLayer(Acetate_all)&&map.removeLayer(Esri_transportation),map.getZoom()>13&&map.hasLayer(Esri_WorldImagery)&&addStreetLabels()});var counties=L.geoJson(null,{style:function(e){return{color:"white",fill:!1,opacity:.4,clickable:!1}},onEachFeature:function(e,a){countySearch.push({name:a.feature.properties.Co_Name,source:"Counties",id:L.stamp(a),bounds:a.getBounds()})}});$.getJSON("data/counties.js",function(e){counties.addData(e)}).complete(function(){map.fitBounds(counties.getBounds())}),counties.addTo(map);var rdIconSize=30,PFFcustomIcon=L.Icon.extend({options:{iconSize:[rdIconSize,rdIconSize],iconAnchor:[rdIconSize/2,rdIconSize/2],popupAnchor:[0,rdIconSize/2]}}),IconPresets={markerSet:"open-freight",mapMarker:"circle-cm",legendMarker:"circle-md",iconSet:"dynico"},commicon=L.OpenFreightMarkers.icon({icon:"airport",markerColor:"forest",layer:"commGroup",title:"Commercial Airport"},IconPresets),relvicon=new L.OpenFreightMarkers.icon({icon:"airport",markerColor:"green",layer:"relGroup",title:"Reliever Airport"},IconPresets),helicon=L.OpenFreightMarkers.icon({icon:"heliport",markerColor:"ltgreen",layer:"heliport",title:"Heliport"},IconPresets),FCintericon=L.OpenFreightMarkers.icon({icon:"center",markerColor:"peach",layer:"FCintergroup",title:"Intermediate Center"},IconPresets),FCmajoricon=L.OpenFreightMarkers.icon({icon:"center",markerColor:"orange",layer:"FCmajorgroup",title:"Major Center"},IconPresets),FCmegaicon=L.OpenFreightMarkers.icon({icon:"center",markerColor:"red",layer:"FCmegagroup",title:"Mega Center"},IconPresets),hwyicon=L.OpenFreightMarkers.icon({icon:"truck",markerColor:"purple",layer:"freeway",title:"Highway"},IconPresets),trckprkicon=L.OpenFreightMarkers.icon({icon:"parking",markerColor:"purple",layer:"trkparkgroup",title:"Truck Parking"},IconPresets),hwybricon=L.OpenFreightMarkers.icon({icon:"bridge",markerColor:"purple",layer:"hwyrivcrossing",title:"Highway River Crossing"},IconPresets),NHSicon=L.OpenFreightMarkers.icon({icon:"nhs",markerColor:"purple",layer:"nhsgroup",title:"NHS Connector"},IconPresets),railLineicon=L.OpenFreightMarkers.icon({icon:"rail",markerColor:"gold",layer:"railines",title:"Rail Line"},IconPresets),ryicon=L.OpenFreightMarkers.icon({icon:"railyard",markerColor:"gold",layer:"railyardgroup",title:"Rail Yard"},IconPresets),imicon=L.OpenFreightMarkers.icon({icon:"intermodal",markerColor:"gold",layer:"intermodalgroup",title:"Intermodal Yard"},IconPresets),xingicon=L.OpenFreightMarkers.icon({icon:"railxing",markerColor:"gold",layer:"gradexing",title:"Class I Grade Crossing"},IconPresets),rbicon=L.OpenFreightMarkers.icon({icon:"bridge",markerColor:"gold",layer:"railbridge",title:"Rail River Crossing"},IconPresets),prticon=L.OpenFreightMarkers.icon({icon:"ship",markerColor:"blue",layer:"portGroup",title:"Port Terminal"},IconPresets),anchicon=L.OpenFreightMarkers.icon({icon:"anchor",markerColor:"blue",layer:"anchorageGroup",title:"Anchorage"},IconPresets),riverIcon=L.OpenFreightMarkers.icon({icon:"river",markerColor:"blue",layer:"river",title:"Navigable River"},IconPresets),fgnicon=L.OpenFreightMarkers.icon({icon:"community",markerColor:"teal",layer:"fgneighbor",title:"Freight as a Good Neighbor"},IconPresets),pipeIcon=L.OpenFreightMarkers.icon({icon:"pipeline",markerColor:"yellow",layer:"pipelines",title:"Pipeline",onLoad:!1},IconPresets),commairpoly=L.geoJson(null,{style:{fillColor:"#216937",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(e,a){a.on({click:clkairport,dblclick:zoomToFeature}),commairSearch.push({name:a.feature.properties.Name,source:"CommAirports",id:L.stamp(a),bounds:a.getBounds()})}}),commairpt=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:commicon})},onEachFeature:function(e,a){a.on({click:clkairport,dblclick:zoomToPoint})}}),relairpoly=L.geoJson(null,{style:{fillColor:"#30B34C",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(e,a){a.on({click:clkairport,dblclick:zoomToFeature}),relairSearch.push({name:a.feature.properties.Name,source:"ReleivAirports",id:L.stamp(a),bounds:a.getBounds()})}}),relvairpt=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:relvicon})},onEachFeature:function(e,a){a.on({click:clkairport,dblclick:zoomToPoint})}}),heliport=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:helicon})},onEachFeature:function(e,a){a.on({click:clkheliport,dblclick:zoomToPoint}),heliportSearch.push({name:a.feature.properties.FacilityNa,source:"Heliports",id:L.stamp(a),lat:a.feature.geometry.coordinates[1],lng:a.feature.geometry.coordinates[0]})}}),FCinterpoly=L.geoJson(null,{style:{fillColor:"#F9AB90",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(e,a){a.on({click:clkFreightCenter,dblclick:zoomToFeature}),FCinterSearch.push({name:a.feature.properties.Name,source:"FCInter",id:L.stamp(a),bounds:a.getBounds()})}}),FCinterpt=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:FCintericon})},onEachFeature:function(e,a){a.on({click:clkFreightCenter,dblclick:zoomToFC})}}),FCmajorpoly=L.geoJson(null,{style:{fillColor:"#F26122",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(e,a){a.on({click:clkFreightCenter,dblclick:zoomToFeature}),FCmajorSearch.push({name:a.feature.properties.Name,source:"FCmajor",id:L.stamp(a),bounds:a.getBounds()})}}),FCmajorpt=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:FCmajoricon})},onEachFeature:function(e,a){a.on({click:clkFreightCenter,dblclick:zoomToFC})}}),FCmegapoly=L.geoJson(null,{style:{fillColor:"#C1332B",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(e,a){a.on({click:clkFreightCenter,dblclick:zoomToFeature}),FCmegaSearch.push({name:a.feature.properties.Name,source:"FCmega",id:L.stamp(a),bounds:a.getBounds()})}}),FCmegapt=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:FCmegaicon})},onEachFeature:function(e,a){a.on({click:clkFreightCenter,dblclick:zoomToFC})}}),truckparkpoly=L.geoJson(null,{style:{fillColor:"#884C9E",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(e,a){a.on({click:clkParking,dblclick:zoomToFeature}),truckParkSearch.push({name:a.feature.properties.Name,source:"TruckParking",id:L.stamp(a),bounds:a.getBounds()})}}),tppoints=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:trckprkicon})},onEachFeature:function(e,a){a.on({click:clkParking,dblclick:zoomToPoint})}}),hwyrivcrossing=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:hwybricon})},onEachFeature:function(e,a){a.on({click:clkHwyRvrXing,dblclick:zoomToPoint}),hwyBridgeSearch.push({name:a.feature.properties.Name_1,source:"HwyBridges",id:L.stamp(a),lat:a.feature.geometry.coordinates[1],lng:a.feature.geometry.coordinates[0]})}}),nhspoly=L.geoJson(null,{style:{weight:5,color:"#E8C3F5 ",opacity:1},onEachFeature:function(e,a){a.on({click:clkNHS,dblclick:zoomToFeature}),nhsSearch.push({name:a.feature.properties.Name_1,source:"NHS",id:L.stamp(a),bounds:a.getBounds()})}}),nhs=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:NHSicon})},onEachFeature:function(e,a){a.on({click:clkNHS,dblclick:zoomToPoint})}}),freeway=L.geoJson(null,{style:function(e){switch(e.properties.Type){case"Limited Access Highway":return{color:"#C57AE0",weight:5,opacity:1};case"Interstate Highway":return{color:"#884C9E",weight:5,opacity:1}}},onEachFeature:function(e,a){a.on({click:clkHwy,dblclick:zoomToFeature}),highwaySearch.push({name:a.feature.properties.Name,source:"Highways",id:L.stamp(a),bounds:a.getBounds()})}}),railines=L.geoJson(null,{style:function(e){switch(e.properties.Type){case"Industrial Track / Shortline":return{color:"#FDD195",weight:5,opacity:.9};case"Secondary":return{color:"#FCBB65",weight:5,opacity:.9};case"Interstate":return{color:"#FD8D3C",weight:5,opacity:.9}}},onEachFeature:function(e,a){a.on({click:clkRailline,dblclick:zoomToFeature}),railSearch.push({name:a.feature.properties.Name,source:"RailLines",id:L.stamp(a),bounds:a.getBounds()})}}),railyardpoly=L.geoJson(null,{style:{fillColor:"#FBA919",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(e,a){a.on({click:clkRailYard,dblclick:zoomToFeature}),railyardSearch.push({name:a.feature.properties.Name,source:"RailYards",id:L.stamp(a),bounds:a.getBounds()})}}),railyardpt=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:ryicon})},onEachFeature:function(e,a){a.on({click:clkRailYard,dblclick:zoomToPoint})}}),intermodalpoly=L.geoJson(null,{style:{fillColor:"#FBA919",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(e,a){a.on({click:clkIntermodal,dblclick:zoomToFeature}),intermodalSearch.push({name:a.feature.properties.Name_1,source:"Intermodal",id:L.stamp(a),bounds:a.getBounds()})}}),intermodalpt=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:imicon})},onEachFeature:function(e,a){a.on({click:clkIntermodal,dblclick:zoomToPoint})}}),gradexing=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:xingicon})},onEachFeature:function(e,a){a.on({click:clkRailXing,dblclick:zoomToPoint}),xingSearch.push({name:a.feature.properties.Name,source:"GradeCrossing",id:L.stamp(a),lat:a.feature.geometry.coordinates[1],lng:a.feature.geometry.coordinates[0]})}});$.getJSON("data/gradeXing.js",function(e){gradexing.addData(e)});var railbridge=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:rbicon})},onEachFeature:function(e,a){a.on({click:clkRailRvrXing,dblclick:zoomToPoint}),RailBridgeSearch.push({name:a.feature.properties.Name,source:"RailBridges",id:L.stamp(a),lat:a.feature.geometry.coordinates[1],lng:a.feature.geometry.coordinates[0]})}}),river=L.geoJson(null,{style:{fillColor:"#55B8DF",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.65},onEachFeature:function(e,a){a.on({click:clkriver,dblclick:zoomToFeature}),riverSearch.push({name:a.feature.properties.NAME,source:"Rivers",id:L.stamp(a),bounds:a.getBounds()})}}),portpoly=L.geoJson(null,{style:{fillColor:"#29A0CF",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.75},onEachFeature:function(e,a){a.on({click:clkport,dblclick:zoomToFeature}),portSearch.push({name:a.feature.properties.Name,source:"PortTerminals",id:L.stamp(a),bounds:a.getBounds()})}}),porticon=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:prticon})},onEachFeature:function(e,a){a.on({click:clkport,dblclick:zoomToPoint})}}),anchoragepoly=L.geoJson(null,{style:{fillColor:"#0E76BC",fillOpacity:.5,weight:1,color:"#E0E0E0 ",opacity:.65},onEachFeature:function(e,a){a.on({click:clkanchorage,dblclick:zoomToFeature}),anchSearch.push({name:a.feature.properties.Name,source:"Anchorages",id:L.stamp(a),bounds:a.getBounds()})}}),anchoricon=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:anchicon})},onEachFeature:function(e,a){a.on({click:clkanchorage,dblclick:zoomToPoint})}}),pipelines=L.geoJson(null,{style:{color:"#EFD315",weight:3,opacity:.9},onEachFeature:function(e,a){a.on({click:clkpipelines,dblclick:zoomToFeature})}});map.on("moveend",function(){if(map.getZoom()>14&&($("#pipelabel").parent().addClass("disabled"),$("#pipelabel").closest(".panel").find(".checked_all").addClass("disabled")),map.getZoom()>14&&map.hasLayer(pipelines)&&$("#pipelines").is(":checked")){map.removeLayer(pipelines);var e=document.getElementById("pipehidden");e.innerHTML="[not available at zoom level]"}if(map.getZoom()<=14&&($("#pipelabel").parent().removeClass("disabled"),$("#pipelabel").closest(".panel").find(".checked_all").removeClass("disabled")),map.getZoom()<=14&&$("#pipelines").is(":checked")){map.addLayer(pipelines);var e=document.getElementById("pipehidden");e.innerHTML="",$("#pipelabel").parent().removeClass("disabled")}});var fgneighbor=L.geoJson(null,{pointToLayer:function(e,a){return L.marker(a,{icon:fgnicon})},onEachFeature:function(e,a){a.on({click:clkfgneighbor,dblclick:zoomToPoint})}});countymap.addLayer(mcounty);var FCintergroup=new L.FeatureGroup([FCinterpt,FCinterpoly]),FCmajorgroup=new L.FeatureGroup([FCmajorpt,FCmajorpoly]),FCmegagroup=new L.FeatureGroup([FCmegapt,FCmegapoly]),FCenters={"Mega Center":FCmegagroup,"Major Center":FCmajorgroup,"Intermediate Center":FCintergroup},railyardgroup=new L.FeatureGroup([railyardpt,railyardpoly]),intermodalgroup=new L.FeatureGroup([intermodalpt,intermodalpoly]),Rail={"Rail Line":railines,"Rail Yard":railyardgroup,"Intermodal Yard":intermodalgroup,"Class I Grade Crossing":gradexing,"Rail River Crossing":railbridge},portGroup=new L.FeatureGroup([porticon,portpoly]),anchorageGroup=new L.FeatureGroup([anchoricon,anchoragepoly]),Portwater={"Navigable River":river,"Port Terminal":portGroup,Anchorage:anchorageGroup},commGroup=new L.FeatureGroup([commairpt,commairpoly]),relGroup=new L.FeatureGroup([relvairpt,relairpoly]),airport={Commercial:commGroup,Reliever:relGroup},nhsgroup=new L.FeatureGroup([nhspoly,nhs]),trkparkgroup=new L.FeatureGroup([truckparkpoly,tppoints]),Highway={
Freeway:freeway,"NHS Connector":nhsgroup,"Truck Parking":trkparkgroup,"Highway River Crossing":hwyrivcrossing};$("#searchbox").click(function(){$(this).select()});
function setMap(){$(".landingUI").fadeOut("fast","easeOutQuad",function(){$(".mapUI").fadeIn("fast","easeInQuad"),$("#mapDIV").fadeIn("fast","easeInQuad"),loadLayers(),map.invalidateSize(),resetHighlight(),resetInfoWindow(),setTimeout(function(){$("#loading").hide()},300)})}function loadScript(e){$.getScript("lib/"+e+".js")}function getLocationHash(){return window.location.hash.substring(1)}function sortByKey(e,t){return e.sort(function(e,n){var o=e[t],i=n[t];return i>o?-1:o>i?1:0})}function toggleinfo(e){$("#togbtn").hasClass("hide")&&$("#togbtn").removeClass("hide"),$("#togbtn").hasClass("glyphicon-plus")&&$("#togbtn").attr("class","glyphicon glyphicon-minus InfoTgl");var t=document.getElementById("info").offsetHeight+document.getElementById("infoheader").offsetHeight+0;$("#infobox_").addClass("active").css("bottom",t)}function togglemin(e){$("#togbtn").hasClass("glyphicon-plus")||$("#togbtn").attr("class","glyphicon glyphicon-plus InfoTgl"),$("#infobox_").css("bottom",0).removeClass("active")}function initializeHL(e){return resetHighlight(),layersearch=e.feature,void 0===layersearch?(highlightMapFeature(e.target),props=e.target.feature.properties):(highlightMapFeature(e),props=layersearch.properties),props}function contentPush(e,t,n,o,i){document.body.clientWidth<=375?(document.getElementById("mobileheader").innerHTML=e,document.getElementById("mobileinfo").innerHTML=t,document.getElementById("mobilefeatureName").innerHTML=n,document.getElementById("mobileMdHeader").className=""+o+" modal-header",$("#mobileInfo_modal").modal("show")):(document.getElementById("infoheader").innerHTML=e,document.getElementById("info").innerHTML=t,document.getElementById("featureName").innerHTML=n,document.getElementById("featureName").className=""+o,document.getElementById("infoheader").className=""+o,document.getElementById("iconography").className=""+i),toggleinfo(),activateTooltip()}function zoomToFeature(e){map.fitBounds(e.target.getBounds())}function zoomToPoint(e){var t=e.target,n=t.getLatLng();map.setView(n,15)}function zoomToFC(e){var t=e.target,n=t.getLatLng();map.setView(n,13)}function highlightMapFeature(e){var t=e.feature.geometry.type;"Point"!=t?e.setStyle({weight:hlweight,color:""+hlColor}):(iconElem=L.DomUtil.get(e._icon),iconElem.id="preselect",$(iconElem).is("img")?(hlmarkerSize=rdIconSize+8,iconElem.style.border="4px "+hlColor+" solid",iconElem.style.height=hlmarkerSize+"px",iconElem.style.width=hlmarkerSize+"px",iconElem.style.marginTop="-"+hlmarkerSize/2+"px",iconElem.style.marginLeft="-"+hlmarkerSize/2+"px",iconElem.id="selectedIcon"):$("#preselect").hasClass("circle-cm")?($(iconElem).append('<div class="markerBox cm" style="border-color:'+hlColor+'"></div>'),iconElem.id="selectedIcon"):$("#preselect").hasClass("circle-sm")?($(iconElem).append('<div class="markerBox sm" style="border-color:'+hlColor+'"></div>'),iconElem.id="selectedIcon"):$("#preselect").hasClass("circle-md")&&($(iconElem).append('<div class="markerBox md" style="border-color:'+hlColor+'"></div>'),iconElem.id="selectedIcon"))}function resetHighlight(){for(var e=0,t=polyLayer.length;t>e;e++){var n=polyLayer[e],o=window[n].options.style;window[n].setStyle(o)}resetIconhighlights()}function resetIconhighlights(){var e=document.getElementById("selectedIcon");void 0!=e&&(e.id="prehide",$(".markerBox").remove(),$(iconElem).is("img")?(e.style.border="",e.style.height=rdIconSize+"px",e.style.width=rdIconSize+"px",e.style.marginTop="-"+rdIconSize/2+"px",e.style.marginLeft="-"+rdIconSize/2+"px",e.id=""):e.id="")}function resetInfoWindow(){$("#togbtn").addClass("hide"),$("#infobox_").removeClass("active").css("bottom",0),document.getElementById("featureName").innerHTML="",document.getElementById("infoheader").innerHTML="<p>Click feature to view details</p>",document.getElementById("infoheader").className="",document.getElementById("featureName").className="",document.getElementById("iconography").className="",document.getElementById("info").innerHTML=""}$.easing.jswing=$.easing.swing,$.extend($.easing,{def:"easeOutQuad",easeInQuad:function(e,t,n,o,i){return o*(t/=i)*t+n},easeOutQuad:function(e,t,n,o,i){return-o*(t/=i)*(t-2)+n}}),$(function(){var e=document.location.toString();if(e.match("#")){{var t=e.split("#")[1];e.split("#")[1]}"map"!=t&&void 0!=t?($("#"+t).show(),countymap.invalidateSize(),tab_status[t]===!1&&($("#"+t).load("includes/"+t+".html",loadScript(t)),tab_status[t]=!0)):setMap()}else $("#home").show();$('a[data-toggle="tab"]').on("show.bs.tab",function(e){window.location.hash=e.target.hash})}),$(window).bind("hashchange",function(){var e=getLocationHash();"map"!=e?($(".mapUI").fadeOut("fast","easeOutQuad",function(){$(".landingUI").fadeIn("fast","easeInQuad"),countymap.invalidateSize(),tab_status[e]===!1&&($("#"+e).load("includes/"+e+".html",loadScript(e)),tab_status[e]=!0)}),$(".landtab-content > .tab-pane").hide(),$("#pFFlanding").animate({scrollTop:0},50),$("#"+e).show(),countymap.invalidateSize()):(setMap(),countymap.invalidateSize())}),$(window).resize(function(){if($(".tt-dropdown-menu").css("max-height",$("#container").height()-$(".navbar").height()-20),document.body.clientWidth<=767)$("#mapDIV").attr("class","col-sm-12 col-lg-12 leaflet-container leaflet-fade-anim"),$("#sidebar").css("display","none"),$("#toggle i").attr("class","glyphicon glyphicon-th-list");else{var e=$("#sidebar").css("display");"block"==e?($("#mapDIV").attr("class","col-sm-8 col-lg-9 leaflet-container leaflet-fade-anim"),$("#toggle i").attr("class","glyphicon glyphicon-chevron-left")):($("#mapDIV").attr("class","col-sm-12 col-lg-12 leaflet-container leaflet-fade-anim"),$("#toggle i").attr("class","glyphicon glyphicon-th-list"))}map.invalidateSize(),countymap.invalidateSize()}),"Microsoft Internet Explorer"==navigator.appName&&$("input").each(function(){""==$(this).val()&&""!=$(this).attr("placeholder")&&($(this).val($(this).attr("placeholder")),$(this).focus(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")}),$(this).blur(function(){""==$(this).val()&&$(this).val($(this).attr("placeholder"))}))}),$(document).ready(function(){function e(){return $("#loading").show().delay(100).promise()}$('[data-toggle="tooltip"]').tooltip(),document.body.clientWidth<=767&&($("#mapDIV").css("class","col-sm-12 col-lg-12"),$("#sidebar").css("display","none")),$(".checked_all").on("click",function(t){var n=$(this).parent().siblings(".panel-collapse").children(".panel-body").children("input.Chkd"),o=$(this);"true"==n.attr("value")?e().done(function(){o.children().attr("class","chkicon dynico dynico-check-square-o"),$(n).siblings(".checkbox").children("input").prop("checked",!0).change(),$(n).val("false"),$("#loading").fadeOut(150)}):(o.children().attr("class","chkicon dynico dynico-square-o"),$(n).siblings(".checkbox").children("input").prop("checked",!1).change(),$(n).val("true"))})}),$('input:checkbox[name="LayerCont"]').on("change",function(){var e=[];if($("#"+$(this).attr("id")).is(":checked")){$('input:checkbox[name="LayerCont"]').each(function(){map.removeLayer(window[$(this).attr("id")]),$("#"+$(this).attr("id")).is(":checked")&&e.push({"z-index":$(this).attr("z-index"),layer:$(this)})});var t=sortByKey(e,"z-index");$.each(t,function(){map.addLayer(window[$(this)[0].layer[0].id])})}else map.removeLayer(window[$(this).attr("id")])}),$(".layer").change(function(){var e=$(this).closest(".panel-body").find("input.layer").length,t=$(this).closest(".panel-body").find("input.layer:checked").length;e==t?($(this).closest(".panel").find(".checked_all").children().attr("class","chkicon dynico dynico-check-square-o"),$(this).closest(".panel-body").find(".Chkd").val("false")):($(this).closest(".panel").find(".checked_all").children().attr("class","chkicon dynico dynico-square-o"),$(this).closest(".panel-body").find(".Chkd").val("true"));var n=$(this).siblings(".dynacheck").length;n>0&&($(this).is(":checked")?$(this).siblings(".dynacheck").find(".legend-check i").attr("class","dynico dynico-check-square-o"):$(this).siblings(".dynacheck").find(".legend-check i").attr("class","dynico dynico-square-o"))}),$("#toggle").click(function(){$("#toggle i").toggleClass("glyphicon-chevron-left glyphicon-th-list"),$("#mapDIV").toggleClass("col-sm-8 col-lg-9 col-sm-12 col-lg-12");var e=$("#sidebar").css("display");return"block"==e?$("#sidebar").css("display","none"):$("#sidebar").css("display","block"),document.body.clientWidth<=767&&$("#mapDIV").toggleClass("hidden"),map.invalidateSize(),mountymap.invalidateSize(),!1}),$(".InfoTgl").click(function(){$("#infobox_").hasClass("active")?togglemin():toggleinfo()}),$("#mobileInfo_modal").on("hide.bs.modal",function(){resetHighlight()}),$(document).ajaxStop(function(){setTimeout(function(){$("#loading").hide()},300)}),L.Control.mapCenter=L.Control.Zoom.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out",zoomMinText:"<i class='dynico dynico-dvrpc'></i>",zoomMinTitle:"View Full Region",vcLatLng:[oLat,oLng],vcZoom:9},onAdd:function(e){var t="leaflet-control-zoom",n=L.DomUtil.create("div",t+" leaflet-bar"),o=this.options;return this._map=e,this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,t+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,t+"-out",n,this._zoomOut,this),this._zoomMinButton=this._createButton(o.zoomMinText,o.zoomMinTitle,t+"-min",n,this._zoomMin,this),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},_zoomMin:function(){var e=this.options,t=e.vcZoom||6;this._map.setView(e.vcLatLng,t)},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";L.DomUtil.removeClass(this._zoomInButton,t),L.DomUtil.removeClass(this._zoomOutButton,t),L.DomUtil.removeClass(this._zoomMinButton,t),e._zoom===e.getMinZoom()&&L.DomUtil.addClass(this._zoomOutButton,t),e._zoom===e.getMaxZoom()&&L.DomUtil.addClass(this._zoomInButton,t),e._zoom===e.getMinZoom()&&L.DomUtil.addClass(this._zoomMinButton,t)}}),map.addControl(new L.Control.mapCenter),map.on("click",function(e){resetHighlight(),resetInfoWindow()}),$(".tab-content").find(".panel-group.legend .panel-heading").first().find("a > div").attr("data-placement","bottom"),$(".panel-group.legend").find(".panellink").attr("data-toggle","tooltip").attr("title","View/hide layers in group"),$(".panel-group.legend").find(".panelinfo").attr("data-toggle","tooltip").attr("title","Learn about these layers"),$(".panel-group.legend").find(".checked_all").attr("data-toggle","tooltip").attr("title","Toggle All Layers").attr("data-placement","left"),function(e){"use strict";function t(t){e(t).on("click"+u,this.toggle)}function n(e,t){e.hasClass("pull-center")&&e.css("margin-right",e.outerWidth()/-2),e.hasClass("pull-middle")&&e.css("margin-top",e.outerHeight()/-2-t.outerHeight()/2)}function o(t,n){if(l){n||(n=[l]);var o;l[0]!==n[0][0]?o=l:(o=n[n.length-1],o.parent().hasClass(r)&&(o=o.parent())),o.find("."+p).removeClass(p),o.hasClass(p)&&o.removeClass(p),o===l&&(l=null,e(d).remove())}}function i(e){for(var t,n=[e];!t||t.hasClass(h);)t=(t||e).parent(),t.hasClass(r)&&(t=t.parent()),t.children(s)&&n.unshift(t);return n}function a(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var o=n&&e(n);return o&&o.length?o:t.parent()}var l,s='[data-toggle="dropdown"]',c=".disabled, :disabled",d=".dropdown-backdrop",r="dropdown-menu",h="dropdown-submenu",m=".bs.dropdown.data-api",u=".bs.dropdown",p="open",g="ontouchstart"in document.documentElement,f=t.prototype;f.toggle=function(t){var s=e(this);if(!s.is(c)){var m=a(s),u=m.hasClass(p),f=m.hasClass(h),y=f?i(m):null;if(o(t,y),!u){y||(y=[m]),!g||m.closest(".navbar-nav").length||y[0].find(d).length||e('<div class="'+d.substr(1)+'"/>').appendTo(y[0]).on("click",o);for(var $=0,v=y.length;v>$;$++)y[$].hasClass(p)||(y[$].addClass(p),n(y[$].children("."+r),y[$]));l=y[0]}return!1}},f.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var n=e(this);if(t.preventDefault(),t.stopPropagation(),!n.is(".disabled, :disabled")){var o=a(n),i=o.hasClass("open");if(!i||i&&27==t.keyCode)return 27==t.which&&o.find(s).trigger("focus"),n.trigger("click");var l=" li:not(.divider):visible a",c="li:not(.divider):visible > input:not(disabled) ~ label",d=o.find(c+', [role="menu"]'+l+', [role="listbox"]'+l);if(d.length){var r=d.index(d.filter(":focus"));38==t.keyCode&&r>0&&r--,40==t.keyCode&&r<d.length-1&&r++,~r||(r=0),d.eq(r).trigger("focus")}}}},f.change=function(t){var n,o,i,a="";if(n=e(this).closest("."+r),o=n.parent().find("[data-label-placement]"),o&&o.length||(o=n.parent().find(s)),o&&o.length&&o.data("placeholder")!==!1){void 0==o.data("placeholder")&&o.data("placeholder",e.trim(o.text())),a=e.data(o[0],"placeholder"),i=n.find("li > input:checked"),i.length&&(a=[],i.each(function(){var t=e(this).parent().find("label").eq(0),n=t.find(".data-label");if(n.length){var o=e("<p></p>");o.append(n.clone()),t=o.html()}else t=t.html();t&&a.push(e.trim(t))}),a=a.length<4?a.join(", "):a.length+" selected");var l=o.find(".caret");o.html(a||"&nbsp;"),l.length&&o.append(" ")&&l.appendTo(o)}};var y=e.fn.dropdown;e.fn.dropdown=function(n){return this.each(function(){var o=e(this),i=o.data("bs.dropdown");i||o.data("bs.dropdown",i=new t(this)),"string"==typeof n&&i[n].call(o)})},e.fn.dropdown.Constructor=t,e.fn.dropdown.clearMenus=function(t){return e(d).remove(),e("."+p+" "+s).each(function(){var n=a(e(this)),o={relatedTarget:this};n.hasClass("open")&&(n.trigger(t=e.Event("hide"+u,o)),t.isDefaultPrevented()||n.removeClass("open").trigger("hidden"+u,o))}),this},e.fn.dropdown.noConflict=function(){return e.fn.dropdown=y,this},e(document).off(m).on("click"+m,o).on("click"+m,s,f.toggle).on("click"+m,'.dropdown-menu > li > input[type="checkbox"] ~ label, .dropdown-menu > li > input[type="checkbox"], .dropdown-menu.noclose > li',function(e){e.stopPropagation()}).on("change"+m,'.dropdown-menu > li > input[type="checkbox"], .dropdown-menu > li > input[type="radio"]',f.change).on("keydown"+m,s+', [role="menu"], [role="listbox"]',f.keydown)}(jQuery);